<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        margin: 50px;
        padding-top: 50px;
        font-size: 20px;
      }

      h1 {
        text-align: center;
      }
      li {
        margin-left: 20px;
      }
    </style>
  </head>
  <body>
    <h1>--------------------------9---------------------</h1>
    <h1>SPAJANJE NA ATLAS</h1>
    <h3>app.js</h3>
    <li>napravim <b>mongoose.connect</b> sa stringom iz atlasa</li>
    <li>
      po pravilu sam trebao koristiti ENV varijable u <b>config.env</b> fajlu,
      ali za ovaj mali projekt to necu
    </li>

    <h1>MODELING Places 9-4</h1>
    <i></i>

    <h3>place.js --- /model</h3>
    <li>napravim <b>placeSchema</b></li>
    <li>exportiram <b>Place</b> model</li>

    <h3>places-controller.js -- kreiranje novog dokumenta</h3>
    <i> createPlace</i>
    <li>require <b>Place</b> model.... to mi je constructor funkcija</li>
    <li>
      napravim novi model za <b>cretedPlace</b> sa <b>Place</b> constructorom
    </li>
    <li>
      u try catch koristim metodu iz mongoose <b>save()</b> da snimim dokument u
      db (Atlas)
    </li>
    <li>spremam u db, pa mi je to async funkcija</li>
    <i>getPlaceById - opisano u kodu</i><br />
    <i>getPlacesByUserId - opisano u kodu</i><br />
    <i>updatePlace - opisano u kodu</i><br />
    <i>deletePlace - opisano u kodu</i><br />

    <h1>USERS MODELING 9-9</h1>
    <h3>user.js --- /model</h3>
    <li>napravim schema kao i za place.js</li>
    <li>dodatno instaliram mongoose-unique-validator za email</li>
    <h3>user-controller.js</h3>
    <li>importiram User model</li>
    <i>signup - opisano u kodu</i><br />
    <i>login - opisano u kodu</i><br />
    <i>getUsers - opisano u kodu</i><br />
    <h1>relacija izmedju places i users</h1>
    <li>jedan user moze kreirati multi places</li>
    <li>place ima samo jednog kreatora</li>
    <h3>place.js</h3>
    <li>
      u Schemi za kreatora zamjenim stari type string sa mongoose.Type.ObjectId
    </li>
    <li>dodam jos i ref: 'User'</li>
    <li>
      to je link na model na koji zelim napraviti referencu...ne moram
      importirati model sa require....
    </li>
    <h3>user.js</h3>
    <li>
      slicno kao i u prethodnom, za <b>places</b> propery dodam mongoose type
      objectId samo sto mi je ovdje ARRAY od IDjeva a ne objekt kao u place.js
    </li>
    <h3>user-controller.js</h3>
    <li>
      dodatno moram i zamjeniti stari dummy kod kad kreiram usera. Prije sam za
      <b>places</b> imao samo dummy string...sada tu stavim array u model
    </li>
    <li>
      taj array je prazan jer kada kreiram korisnika, taj korisnik jos nije
      dodao niti jedan place
    </li>
  </body>
</html>
